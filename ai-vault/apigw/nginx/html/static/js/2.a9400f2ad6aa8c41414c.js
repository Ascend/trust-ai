webpackJsonp([2],{CdPg:function(t,s){},HXef:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Dd8w"),e=i.n(a),n=i("lta2");var r=i("y5xs"),l={name:"home",data:function(){return{useramount:0,datasize:0,version:"",tableData:[],healthStatus:"",tmpVersion:"",tmpTableData:[],tmpHealthStatus:"",isQueryVersion:!1,isQueryCert:!1,isQueryHealth:!1,spanArr:[],position:0,fileList:[],isUploading:!1,isDownloading:!1,mgmtcert:{CertType:"管理面",CertValidDate:"",CertAlarm:"",CrlStatus:""},svccert:{CertType:"服务面",CertValidDate:"",CertAlarm:"",CrlStatus:""}}},mounted:function(){this.fetchData()},watch:{isQueryVersion:function(t,s){this.isQueryVersion&&this.isQueryHealth&&this.isQueryCert&&(this.version=this.tmpVersion,this.healthStatus=this.tmpHealthStatus,this.tableData=this.tmpTableData)},isQueryHealth:function(t,s){this.isQueryVersion&&this.isQueryHealth&&this.isQueryCert&&(this.version=this.tmpVersion,this.healthStatus=this.tmpHealthStatus,this.tableData=this.tmpTableData)},isQueryCert:function(t,s){this.isQueryVersion&&this.isQueryHealth&&this.isQueryCert&&(this.version=this.tmpVersion,this.healthStatus=this.tmpHealthStatus,this.tableData=this.tmpTableData,this.handleSpan())}},methods:{handleGetUserAmount:function(){var t=this;Object(r.d)({}).then(function(s){t.useramount=s.data.data.total})},handleGetDataSize:function(){var t=this;(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/datamanager/v1/size",t)})({}).then(function(s){t.datasize=(s.data.data.size/1024/1024).toFixed(2)})},queryVersion:function(){var t=this;(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/AIVAULT/v1/version/",t)})().then(function(s){if("31000022"===s.data.status)var i=setTimeout(function(){t.queryVersion(),clearTimeout(i)},1e3);else t.tmpVersion=s.data.data.version.split("_")[0],t.isQueryVersion=!0}).finally(function(){var s=setTimeout(function(){t.queryHealth(),clearTimeout(s)},1e3)})},queryHealth:function(){var t=this;(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/AIVAULT/v1/health",t)})().then(function(s){if("31000022"===s.data.status)var i=setTimeout(function(){t.queryHealth(),clearTimeout(i)},1e3);else t.tmpHealthStatus="ok"===s.data.msg?"健康":"不健康",t.isQueryHealth=!0}).finally(function(){var s=setTimeout(function(){t.queryCert(),clearTimeout(s)},1e3)})},queryCert:function(){var t=this;(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/AIVAULT/v1/certStatus",t)})().then(function(s){if("31000022"===s.data.status)var i=setTimeout(function(){t.queryCert(),clearTimeout(i)},1e3);else t.tmpTableData=s.data.data,t.isQueryCert=!0})},fetchData:function(){this.handleGetUserAmount(),this.handleGetDataSize(),this.queryVersion()},handleSpan:function(){var t=this,s=this.tableData.filter(function(t){return"MGMT"===t.CertType}),i=this.tableData.filter(function(t){return"MGMT"!==t.CertType});this.tableData=s.concat(i),this.tableData.forEach(function(s,i){"MGMT"===s.CertType&&(t.mgmtcert.CertAlarm=""===s.CertAlarm?"正常":"不正常",t.mgmtcert.CrlStatus="No CRL certificate has been imported."===s.CrlStatus?"未导入":"已导入",t.mgmtcert.CertValidDate=s.CertValidDate),t.svccert.CertAlarm=""===s.CertAlarm?"正常":"不正常",t.svccert.CrlStatus="No CRL certificate has been imported."===s.CrlStatus?"未导入":"已导入",t.svccert.CertValidDate=s.CertValidDate})},handleBeforeUpload:function(t){this.isUploading=!0;var s=t.type.indexOf("zip")>-1,i=t.size/1024/1024<=50;return s||(this.$message.error(this.$t("ERR_UPLOAD_FILE_TYPE")),this.isUploading=!1),i||(this.$message.error(this.$t("ERR_UPLOAD_FILE_SIZE")),this.isUploading=!1),s&&i},handleDownload:function(){var t=this;this.isDownloading=!0,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/datamanager/v1/export",e()({},t),{responseType:"blob"})}().then(function(s){if(void 0===s.headers["content-disposition"]){var i=new FileReader;i.onload=function(s){"41000002"===JSON.parse(s.target.result).status&&t.$message.error({message:t.$t("ERR_DOWNLOAD")})},i.readAsText(s.data)}else{var a=new Blob([s.data],{type:"application/json"}),e=s.headers["content-disposition"].split(";")[1].split("=")[1],n=document.createElement("a");n.style.display="none";var r=window.URL||window.webkitURL||window.moxURL;n.href=r.createObjectURL(a),n.download=e,n.click(),window.URL.revokeObjectURL(r)}}),this.isDownloading=!1},handleUploadSuccess:function(t,s,i){"00000000"===t.status?this.$message.success({message:this.$t("SUCCESS_UPLOAD")}):this.$message.warning({message:this.$t("ERR_UPLOAD")}),this.isUploading=!1},handleUploadError:function(t,s,i){this.$message.warning({message:this.$t("ERR_UPLOAD")}),this.isUploading=!1}}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"home"},[a("div",{staticClass:"left"},[a("div",{staticClass:"left-box first-left"},[a("div",{staticClass:"left-name"},[t._v(t._s(t.$t("USER_AMOUNT")))]),t._v(" "),a("div",{staticClass:"left-num"},[t._v(t._s(t.useramount))])]),t._v(" "),a("div",{staticClass:"left-box"},[a("div",{staticClass:"left-name"},[t._v(t._s(t.$t("SYS_DATA_SIZE")))]),t._v(" "),a("div",{staticClass:"left-num"},[t._v(t._s(t.datasize))])])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"right-box right-top"},[a("div",[a("div",{staticClass:"title"},[t._v(t._s(t.$t("TOOL_INFO")))])]),t._v(" "),a("div",{staticClass:"top-button"},[a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"/datamanager/v1/import","file-list":t.fileList,"before-upload":t.handleBeforeUpload,"show-file-list":!1,"on-success":t.handleUploadSuccess,"on-error":t.handleUploadError}},[a("el-button",{staticStyle:{color:"#D3DCE9"},attrs:{type:"text",icon:"el-icon-upload2",loading:t.isUploading}},[t._v(t._s(t.$t("BUTTON_UPLOAD")))])],1),t._v(" "),a("el-button",{staticStyle:{color:"#D3DCE9"},attrs:{type:"text",icon:"el-icon-download",loading:t.isDownloading},on:{click:t.handleDownload}},[t._v(t._s(t.$t("BUTTON_DOWNLOAD")))])],1),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("VERSION")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.version))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("HEALTH_STATUS")))]),t._v(" "),a("div",{staticClass:"right_info",staticStyle:{display:"flex"}},[a("img",{staticStyle:{"margin-right":"10px"},attrs:{src:i("nwfx")}}),t._v(" "),a("div",[t._v(t._s(t.healthStatus))])])])]),t._v(" "),a("div",{staticClass:"right-box"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("CERT_INFO")))]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_TYPE")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CertType))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_VALID_DATE")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CertValidDate))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_ALARM")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CertAlarm))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CRL_STATUS")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CrlStatus))])])]),t._v(" "),a("div",{staticClass:"right-box"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("CERT_INFO")))]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_TYPE")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CertType))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_VALID_DATE")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CertValidDate))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_ALARM")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CertAlarm))])]),t._v(" "),a("div",{staticClass:"info-block"},[a("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CRL_STATUS")))]),t._v(" "),a("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CrlStatus))])])])])])},staticRenderFns:[]};var c=i("VU/8")(l,o,!1,function(t){i("CdPg")},"data-v-9ee63a8a",null);s.default=c.exports}});
//# sourceMappingURL=2.a9400f2ad6aa8c41414c.js.map