webpackJsonp([2],{HXef:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s("Dd8w"),e=s.n(i),n=s("lta2");var r=s("y5xs"),l={name:"home",data:function(){return{useramount:0,datasize:0,version:"",tableData:[],healthStatus:"",spanArr:[],position:0,fileList:[],isUploading:!1,isDownloading:!1,mgmtcert:{CertType:"管理面",CertValidDate:"",CertAlarm:"",CrlStatus:""},svccert:{CertType:"服务面",CertValidDate:"",CertAlarm:"",CrlStatus:""}}},mounted:function(){this.queryData()},methods:{queryData:function(){var t=this;Object(r.d)({}).then(function(a){t.useramount=a.data.data.total}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/datamanager/v1/size",t)}().then(function(a){t.datasize=(a.data.data.size/1024/1024).toFixed(2)}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/AIVAULT/v1/version/",t)}().then(function(a){if("31000022"===a.data.status)var s=setTimeout(function(){t.queryData(),clearTimeout(s)},1e3);(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/AIVAULT/v1/health",t)})().then(function(s){if("31000022"===s.data.status)var i=setTimeout(function(){t.queryData(),clearTimeout(i)},1e3);(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/AIVAULT/v1/certStatus",t)})().then(function(i){if("31000022"===i.data.status)var e=setTimeout(function(){t.queryData(),clearTimeout(e)},1e3);t.tableData=i.data.data,t.handleSpan(),t.healthStatus="ok"===s.data.msg?"健康":"不健康",t.version=a.data.data.version.split("_")[0]})})})},handleSpan:function(){var t=this,a=this.tableData.filter(function(t){return"MGMT"===t.CertType}),s=this.tableData.filter(function(t){return"MGMT"!==t.CertType});this.tableData=a.concat(s),this.tableData.forEach(function(a,s){"MGMT"===a.CertType&&(t.mgmtcert.CertAlarm=""===a.CertAlarm?"正常":"不正常",t.mgmtcert.CrlStatus="No CRL certificate has been imported."===a.CrlStatus?"未导入":"已导入",t.mgmtcert.CertValidDate=a.CertValidDate),t.svccert.CertAlarm=""===a.CertAlarm?"正常":"不正常",t.svccert.CrlStatus="No CRL certificate has been imported."===a.CrlStatus?"未导入":"已导入",t.svccert.CertValidDate=a.CertValidDate})},handleBeforeUpload:function(t){this.isUploading=!0;var a=t.type.indexOf("zip")>-1,s=t.size/1024/1024<=50;return a||(this.$message.error(this.$t("ERR_UPLOAD_FILE_TYPE")),this.isUploading=!1),s||(this.$message.error(this.$t("ERR_UPLOAD_FILE_SIZE")),this.isUploading=!1),a&&s},handleDownload:function(){var t=this;this.isDownloading=!0,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)("/datamanager/v1/export",e()({},t),{responseType:"blob"})}().then(function(a){if(void 0===a.headers["content-disposition"]){var s=new FileReader;s.onload=function(a){"41000002"===JSON.parse(a.target.result).status&&t.$message.error({message:t.$t("ERR_DOWNLOAD")})},s.readAsText(a.data)}else{var i=new Blob([a.data],{type:"application/json"}),e=a.headers["content-disposition"].split(";")[1].split("=")[1],n=document.createElement("a");n.style.display="none";var r=window.URL||window.webkitURL||window.moxURL;n.href=r.createObjectURL(i),n.download=e,n.click(),window.URL.revokeObjectURL(r)}}),this.isDownloading=!1},handleUploadSuccess:function(t,a,s){"00000000"===t.status?this.$message.success({message:this.$t("SUCCESS_UPLOAD")}):this.$message.warning({message:this.$t("ERR_UPLOAD")}),this.isUploading=!1},handleUploadError:function(t,a,s){this.$message.warning({message:this.$t("ERR_UPLOAD")}),this.isUploading=!1}}},o={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"home"},[i("div",{staticClass:"left"},[i("div",{staticClass:"left-box first-left"},[i("div",{staticClass:"left-name"},[t._v(t._s(t.$t("USER_AMOUNT")))]),t._v(" "),i("div",{staticClass:"left-num"},[t._v(t._s(t.useramount))])]),t._v(" "),i("div",{staticClass:"left-box"},[i("div",{staticClass:"left-name"},[t._v(t._s(t.$t("SYS_DATA_SIZE")))]),t._v(" "),i("div",{staticClass:"left-num"},[t._v(t._s(t.datasize))])])]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"right-box right-top"},[i("div",[i("div",{staticClass:"title"},[t._v(t._s(t.$t("TOOL_INFO")))])]),t._v(" "),i("div",{staticClass:"top-button"},[i("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"/datamanager/v1/import","file-list":t.fileList,"before-upload":t.handleBeforeUpload,"show-file-list":!1,"on-success":t.handleUploadSuccess,"on-error":t.handleUploadError}},[i("el-button",{staticStyle:{color:"#D3DCE9"},attrs:{type:"text",icon:"el-icon-upload2",loading:t.isUploading}},[t._v(t._s(t.$t("BUTTON_UPLOAD")))])],1),t._v(" "),i("el-button",{staticStyle:{color:"#D3DCE9"},attrs:{type:"text",icon:"el-icon-download",loading:t.isDownloading},on:{click:t.handleDownload}},[t._v(t._s(t.$t("BUTTON_DOWNLOAD")))])],1),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("VERSION")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.version))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("HEALTH_STATUS")))]),t._v(" "),i("div",{staticClass:"right_info",staticStyle:{display:"flex"}},[i("img",{staticStyle:{"margin-right":"10px"},attrs:{src:s("nwfx")}}),t._v(" "),i("div",[t._v(t._s(t.healthStatus))])])])]),t._v(" "),i("div",{staticClass:"right-box"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("CERT_INFO")))]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_TYPE")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CertType))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_VALID_DATE")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CertValidDate))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_ALARM")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CertAlarm))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CRL_STATUS")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.mgmtcert.CrlStatus))])])]),t._v(" "),i("div",{staticClass:"right-box"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("CERT_INFO")))]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_TYPE")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CertType))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_VALID_DATE")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CertValidDate))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CERT_ALARM")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CertAlarm))])]),t._v(" "),i("div",{staticClass:"info-block"},[i("div",{staticClass:"right_name"},[t._v(t._s(t.$t("COLUMN_CRL_STATUS")))]),t._v(" "),i("div",{staticClass:"right_info"},[t._v(t._s(t.svccert.CrlStatus))])])])])])},staticRenderFns:[]};var c=s("VU/8")(l,o,!1,function(t){s("Vjgf")},"data-v-650660d7",null);a.default=c.exports},Vjgf:function(t,a){}});
//# sourceMappingURL=2.4a88213cfe7d9896fe6c.js.map